<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="user-scalable=no, width=device-width, height=device-height, initial-scale=1.0" />
    <title>The Cottage - Admin</title>
    <link rel="stylesheet" href="../static/admin.css" />
</head>

<body>
    <div id="root">
        <!--=============  NAVIGATION  ================-->
        <nav class="navbar">

            <div class="navbar-inner">
                <div class="navbar-left">
                    <div class="hamburger-container" v-on:click="hamburgerAction()">
                        <div ref="hamburger" class="hamburger">
                            <span v-for="i in 3"></span>
                        </div>
                    </div>
    
                    <div class="navbar-logo" v-on:click="scrollToTop()">
                        <div>THE COTTAGE</div>
                        <div>ADMIN</div>
                    </div>
                </div>
                
                <div class="navbar-right">
                    <div class="navbar-links">
                        <div class="cottage-link" v-on:click="goToCottage($event)">The Cottage <span class="cottage-link-span">&#9662;</span>
                            <div class="cottage-dropdown">
                                <ul>
                                    <li v-on:click="goToCottageGallery()">Gallery</li>
                                    <li v-on:click="goToCottageOverview()">Overview</li>
                                    <li v-on:click="goToCottageFacilities()">Facilities</li>
                                    <li v-on:click="goToCottageLocation()">Location</li>
                                </ul>
                            </div>
                        </div>
                        <div v-on:click="goToBooking()">Availability &amp; Booking</div>
                        <div v-on:click="goToContact()">Contact Us</div>
                    </div>
    
                </div>
            </div>
            
        </nav>

        <div ref="sideMenu" class="side-menu" v-on:touchstart="menuTouchstart($event)" v-on:touchmove="menuTouchmove($event)" v-on:touchend="menuTouchend($event)">
            <div class="nav-links">
                <div v-on:click="goToCottage()">The Cottage</div>
                <ul>
                    <li v-on:click="goToCottageGallery()">Gallery</li>
                    <li v-on:click="goToCottageOverview()">Overview</li>
                    <li v-on:click="goToCottageFacilities()">Facilities</li>
                    <li v-on:click="goToCottageLocation()">Location</li>
                </ul>
                <div v-on:click="goToBooking()">Availability &amp; Booking</div>
                <div v-on:click="goToContact()">Contact Us</div>
            </div>
        </div>

        <div class="tabs">
            <div class="price-list-tab-outer" v-on:click="goToPriceList()">
                <div class="price-list-tab-inner">Price List</div>
            </div>
            <div class="bookings-tab-outer" v-on:click="goToBookings()">
                <div class="bookings-tab-inner">Bookings</div>
            </div>
            <div class="customers-tab-outer" v-on:click="goToCustomers()">
                <div class="customers-tab-inner">Customers</div>
            </div>
            <div class="settings-tab-outer" v-on:click="goToSettings()">
                <div class="settings-tab-inner">Settings</div>
            </div>
        </div>

        <div class="page-content">

            <div class="price-list">
                <h1>Price List Editor</h1>

                <div class="list-view">
                    <template v-if="activePriceList">
                        <div class="price-list-segment" v-for="segment in activePriceList" :class="{ 'update-flag': segment.updateFlag }">
                            <input type="date" class="segment-start-date" v-model="segment['startDate']" />
                            <input type="number" class="segment-price" step="0.01" v-model="segment['price']" />
                            <input type="checkbox" class="delete-flag" v-model="segment['deleteFlag']" />
                        </div>
                    </template>
                    <template v-else>
                        <p>LOADING...</p>
                    </template>
                    
                    <!--
                    <template v-if="activePriceList">
                        <div class="price-list-segment" v-for="segment in activePriceList" :class="{ 'update-flag': segment.updateFlag }">
                            <input type="date" v-model="segment['startDate']" />
                            <input type="number" step="0.01" v-model="segment['price']" />
                            <input type="number" step="0.01" v-model="segment['price2Weeks']" />
                            <input type="number" step="0.01" v-model="segment['price3Weeks']" />
                            <input type="number" step="0.01" v-model="segment['price4Weeks']" />
                            <input type="checkbox" v-model="segment['deleteFlag']" />
                        </div>
                    </template>
                    <template v-else>
                        <p>LOADING...</p>
                    </template>-->

                    <template v-if="futurePriceList">
                        <div class="price-list-segment future" v-for="segment in futurePriceList" :class="{ 'update-flag': segment.updateFlag }">
                            <input type="date" class="segment-start-date"v-model="segment['startDate']" />
                            <input type="number" class="segment-price" step="0.01" v-model="segment['price']" />
                            <input type="checkbox" v-model="segment['deleteFlag']" />
                        </div>
                    </template>
                    <template v-else>
                        <p>LOADING...</p>
                    </template>
                    <!--
                    <template v-if="futurePriceList">
                        <div class="future-price-list-segment" v-for="segment in futurePriceList" :class="{ 'update-flag': segment.updateFlag }">
                            <input type="date" v-model="segment['startDate']" />
                            <input type="number" step="0.01" v-model="segment['price']" />
                            <input type="number" step="0.01" v-model="segment['price2Weeks']" />
                            <input type="number" step="0.01" v-model="segment['price3Weeks']" />
                            <input type="number" step="0.01" v-model="segment['price4Weeks']" />
                            <input type="checkbox" v-model="segment['deleteFlag']" />
                        </div>
                    </template>
                    <template v-else>
                        <p>LOADING...</p>
                    </template>-->

                    <template v-if="newPriceList">
                        <div class="price-list-segment" v-for="segment in newPriceList" :class="{ 'update-flag': segment.updateFlag }">
                            <input type="date" class="segment-start-date" v-model="segment['startDate']" />
                            <input type="number" class="segment-price" step="0.01" v-model="segment['price']" />
                            <input type="checkbox" v-model="segment['deleteFlag']" />
                        </div>
                    </template>
                    <template v-else>
                        <p>LOADING...</p>
                    </template>
                    <!--
                    <template v-if="newPriceList">
                        <div class="new-price-list-segment" v-for="segment in newPriceList" :class="{ 'update-flag': segment.updateFlag }">
                            <input type="date" v-model="segment['startDate']" />
                            <input type="number" step="0.01" v-model="segment['price']" />
                            <input type="number" step="0.01" v-model="segment['price2Weeks']" />
                            <input type="number" step="0.01" v-model="segment['price3Weeks']" />
                            <input type="number" step="0.01" v-model="segment['price4Weeks']" />
                            <input type="checkbox" v-model="segment['deleteFlag']" />
                        </div>
                    </template>
                    <template v-else>
                        <p>LOADING...</p>
                    </template>-->
                    
                    <div class="price-list-controls">
                        <button v-on:click="refreshPriceList()">REFRESH</button>
                        <button v-on:click="addPriceListSegment()">ADD SEGMENT</button>
                        <button v-on:click="setPriceList()">UPDATE PRICE LIST</button>
                    </div>
                </div>          
  
            </div>

            <div class="bookings hidden">
                <h1>Bookings</h1>
                <template v-if="bookings">
                    <div class="bookings-list-view">
                        <div class="booking" v-for="booking in bookings"  >

                            <div class="page">
                                <div class="page-close-container" v-on:click="exitFullscreen($event)">
                                    <div class="page-close">
                                        <span v-for="i in 2"></span>
                                    </div>
                                </div>
                                
                                <label for="customer-id">Customer</label>
                                <select id="customer-id" v-model="booking['customerId']" name="customer-id">
                                    <option v-for="customer in customers" :value="customer['id']"><% customer['firstName'] %> <% customer['lastName'] %></option>
                                </select>

                                <label for="arrival-date">Arrival Date</label>
                                <input id="arrival-date" v-model="booking['arrivalDate']" type="date"  />

                                <label for="departure-date">Departure Date</label>
                                <input id="departure-date" v-model="booking['departureDate']" type="date" />

                                <label for="adults">Adults</label>
                                <input id="adults" v-model="booking['adults']" type="number" step="1" />

                                <label for="children">Children</label>
                                <input id="children" v-model="booking['children']" type="number" step="1" />

                                <label for="infants">Infants</label>
                                <input id="infants" v-model="booking['infants']" type="number" step="1" />

                                <label for="dogs">Dogs</label>
                                <input id="dogs" v-model="booking['dogs']" type="number" step="1" />

                                <label for="stay-price">Stay Price</label>
                                <input id="stay-price" v-model="booking['stayPrice']" type="number" step="0.01" />

                                <label for="dog-price">Dog Price</label>
                                <input id="dog-price" v-model="booking['dogPrice']" type="number" step="0.01" />

                                <label for="price">Price</label>
                                <input id="price" v-model="booking['price']" type="number" step="0.01" />

                                <button class="page-delete" v-on:click="bookingDelete(booking, $event)">DELETE</button>
                                <button class="page-update" v-on:click="bookingUpdate(booking)">UPDATE</button>
                            </div>

                            <div class="card" v-on:click="cardClick(booking, $event)" :class="{ 'select-flag': booking.selectFlag }">
                                <div class="customer-id"><% customerName(booking['customerId']) %></div>
                                <div class="guests-total"><% booking['adults'] + booking['children'] %> guests</div>
                                <div class="arrival-date"><% booking['arrivalDate'] %></div>
                                <div class="departure-date"><% booking['departureDate'] %></div>
                                <div class="price">Â£<% booking['price'] %></div>
                                <div class="booking-status">Status</div>
                            </div>
                        
                        </div>
                    </div>
                    <button class="cards-add" v-on:click="addBooking()">+</button>
                    <button class="cards-select" v-on:click="cardSelectOn()">SELECT</button>
                    <button class="cards-cancel" v-on:click="cardSelectOff()">CANCEL</button>
                    <button class="cards-delete" v-on:click="bookingSelectionDelete()">DELETE (<% cardSelection.length %>)</button>
                </template>
                <template v-else>
                    <p>LOADING...</p>>
                </template>
                
            </div>

            <div class="customers hidden">

                <h1>Customers</h1>
                <template v-if="customers">
                    <div class="customers-list-view">
                        <div class="customer" v-for="customer in customers">
                            
                            <div class="page">
                                <div class="page-close-container" v-on:click="exitFullscreen($event)">
                                    <div class="page-close">
                                        <span v-for="i in 2"></span>
                                    </div>
                                </div>
                                
                                <label for="first-name">First Name</label>
                                <input id="first-name" v-model="customer['firstName']" />

                                <label for="last-name">Last Name</label>
                                <input id="last-name" v-model="customer['lastName']" />

                                <label for="email-address">Email Address</label>
                                <input id="email-address" v-model="customer['emailAddress']" />

                                <label for="phone-number">Phone Number</label>
                                <input id="phone-number" v-model="customer['phoneNumber']" />

                                <label for="address-line-1">Address Line 1</label>
                                <input id="address-line-1" v-model="customer['addressLine1']" />

                                <label for="address-line-2">Address Line 2</label>
                                <input id="address-line-2" v-model="customer['addressLine2']" />

                                <label for="town-or-city">Town or City</label>
                                <input id="town-or-city" v-model="customer['townOrCity']" />

                                <label for="county-or-region">County or Region</label>
                                <input id="county-or-region" v-model="customer['countyOrRegion']" />

                                <label for="postcode">Postcode</label>
                                <input id="postcode" v-model="customer['postcode']" />

                                <button class="page-delete" v-on:click="customerDelete(customer, $event)">DELETE</button>
                                <button class="page-update" v-on:click="customerUpdate(customer)">UPDATE</button>
                            </div>

                            <div class="card" v-on:click="cardClick(customer, $event)" :class="{ 'select-flag': customer.selectFlag }">
                                <div class="customer-name"><% customer['firstName'] %> <% customer['lastName'] %></div>
                                <div class="customer-email-address"><% customer['emailAddress'] %></div>
                                <div class="customer-phone-number"><% customer['phoneNumber'] %></div>
                                <div class="customer-address">
                                    <% customer['addressLine1'] %> <br>
                                    <template v-if="customer['addressLine2']">
                                        <% customer['addressLine2'] %> <br>
                                    </template>
                                    <% customer['townOrCity'] %> <br>
                                    <% customer['countyOrRegion'] %> <br>
                                    <% customer['postCode'] %>
                                </div>
                            </div>
                            
        
                        </div>
                    </div>
                    <button class="cards-add" v-on:click="addCustomer()">+</button>
                    <button class="cards-select" v-on:click="cardSelectOn()">SELECT</button>
                    <button class="cards-cancel" v-on:click="cardSelectOff()">CANCEL</button>
                    <button class="cards-delete" v-on:click="customerSelectionDelete()">DELETE (<% cardSelection.length %>)</button>
                </template>
                <template v-else>
                    <p>LOADING...</p>
                </template>
                   
            </div>
    
            <div class="settings hidden">
                <template v-if="priceListSettings">
                    <label for="changeover-day">Changeover Day</label>
                    <select id="changeover-day" v-model="priceListSettings['defaultChangeoverDay']" name="changeover-day">
                        <option value="1">Monday</option>
                        <option value="2">Tuesday</option>
                        <option value="3">Wednesday</option>
                        <option value="4">Thursday</option>
                        <option value="5">Friday</option>
                        <option value="6">Saturday</option>
                        <option value="0">Sunday</option>
                    </select>
    
                    <label for="active-prices-range">Active Prices Range</label>
                    <input id="price-list-range" v-model="priceListSettings['activePricesRange']" type="number" />
    
                    <label for="future-prices-range">Future Prices Range</label>
                    <input id="future-prices-range" v-model="priceListSettings['futurePricesRange']" type="number" />
                    
                    <label for="discount-2-weeks">2 Weeks Discount</label>
                    <input id="discount-2-weeks" v-model="priceListSettings['discount2Weeks']" type="number" step="0.01" />
    
                    <label for="discount-3-weeks">3 Weeks Discount</label>
                    <input id="discount-3-weeks" v-model="priceListSettings['discount3Weeks']" type="number" step="0.01" />
    
                    <label for="discount-4-weeks">4 Weeks Discount</label>
                    <input id="discount-4-weeks" v-model="priceListSettings['discount4Weeks']" type="number" step="0.01" />
    
                    <label for="max-segment-length">Max Segment Length</label>
                    <input id="max-segment-length" v-model="priceListSettings['maxSegmentLength']" type="number" step="1" />
    
                    <label for="price-per-dog">Price per Dog</label>
                    <input id="price-per-dog" v-model="priceListSettings['pricePerDog']" type="number" step="0.01" />
    
                    <label for="max-dogs">Max Dogs</label>
                    <input id="max-dogs" v-model="priceListSettings['maxDogs']" type="number" step="1" />
    
                    <label for="max-infants">Max Infants</label>
                    <input id="max-infants" v-model="priceListSettings['maxInfants']" type="number" step="1" />
    
                    <label for="max-guests">Max Guests</label>
                    <input id="max-guests" v-model="priceListSettings['maxGuests']" type="number" step="1" />
    
                    <button v-on:click="adjustRanges()">ADJUST RANGES</button>
    
                    <button v-on:click="applyDiscounts()">APPLY DISCOUNTS</button>
    
                    <button v-on:click="setPriceListSettings()">UPDATE SETTINGS</button>
                </template>
                <template v-else>
                    <p>LOADING...</p>
                </template>
                
    
                
            </div>

        </div>

        
        
    </div>
</body>

<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

<script src="../static/admin.js"></script>

</html>